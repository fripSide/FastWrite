### Prepare Command 

#### 1. Data Structure & Configuration (`config.json`)

To support multiple projects, we need a global configuration file to track project paths.

*   **File Location:** root dir
*   **Structure:**
    ```json
    {
      "current_project": "project_name_A",
      "projects": {
        "project_name_A": {
          "sections_dir": "path/to/paper/sections",
          "proj_dir": "path/to/paper/proj" 
        },
        "project_name_B": {
          "sections_dir": "another/path/sections",
          "proj_dir": "another/path/proj"
        }
      }
    }
    ```
*   **Definitions:**
    *   `sections_dir`: The directory containing the original source LaTeX files (e.g., `0-abstract.tex`).
    *   `proj_dir`: The working directory generated by the tool to store intermediate files (prompts, backups, diffs).

#### 2. Command: Prepare (`prepare` or `p`)

**Syntax:** `p [project_name] <sections_directory_path>`

**Logic Flow:**
1.  **Path Validation:** Verify if the provided `<sections_directory_path>` exists.
2.  **Project Registration:**
    *   If `[project_name]` is provided, use it as the key in `config.json`.
    *   If not provided, derive the project name from the parent folder of the sections directory.
    *   Update `config.json` setting this new project as `current_project`.
3.  **Directory Initialization:**
    *   Create a sibling directory (or a specific path) named `proj` (or based on configuration) to serve as the workspace.
    *   Inside `proj_dir`, create subdirectories: `backups/`, `prompts/`, `diffs/`.
4.  **Prompt Generation:**
    *   Scan all `.tex` files in `<sections_directory_path>` matching the pattern `{id}-{filename}.tex`.
    *   For each LaTeX file, create a corresponding Markdown file in `proj_dir/prompts/` named `{id}-{filename}.md`.
    *   **Content of the Markdown file:** Pre-fill it with a template that includes instructions for the user (e.g., "<!-- Write your modification requirements below -->").

#### 3. Command: Switch Project (`switch` or `s`)

**Syntax:** `s <project_name>`

**Logic Flow:**
1.  **Validation:** Check if `<project_name>` exists in the `projects` keys of `config.json`.
2.  **Execution:**
    *   Update the `current_project` field in `config.json` to `<project_name>`.
    *   Output a confirmation message showing the currently active `sections_dir` and `proj_dir`.
3.  **Error Handling:** If the project does not exist, list all available projects from the config.

#### 4. Command: Write (`write` or `w`)

**Syntax:** `w <section_id>`

**Logic Flow:**
1.  **Context Loading:** Read `config.json` to get the `current_project` paths.
2.  **File Identification:**
    *   Locate the target prompt file: `proj_dir/prompts/{section_id}-*.md`.
    *   Locate the target source file: `sections_dir/{section_id}-*.tex`.
3.  **Execution (The existing logic):**
    *   Load `system.md`.
    *   Read user requirements from the prompt markdown file.
    *   Backup the original `.tex` file to `proj_dir/backups/`.
    *   Call LLM API to generate the new content.
    *   Overwrite the original `.tex` file in `sections_dir`.
    *   Generate a HTML diff comparing the backup and the new file, saving it to `proj_dir/diffs/`.
